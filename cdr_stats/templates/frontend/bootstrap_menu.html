{% load i18n cdr_tags frontend_notification_tags activelink common_tags %}

<!-- Static navbar -->
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand cornerlogo" href="/"><img src="{{STATIC_URL}}cdr-stats/images/cdr-stats.png"/></a>
    </div>

    <div class="navbar-collapse collapse">
        {% if user.is_authenticated %}
            <ul class="nav navbar-nav">
              {% if perms.user_profile.dashboard %}
                <li {% ifequal module 'dashboard' %}class="active"{% endifequal %}><a href="/dashboard/">{% trans "dashboard"|title %}</a></li>
              {% endif %}
            </ul>
            <ul class="nav navbar-nav">
              <li class="{% ifactive '/dashboard/' %}active{% endifactive %}{% ifactive '/sms_dashboard/' %}active{% endifactive %}">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">{% trans "analytics"|title %}<b class="caret"></b></a>
                <ul class="dropdown-menu">
                  {% if perms.user_profile.overview %}
                    <li {% ifequal module 'overview' %}class="active"{% endifequal %}><a href="/cdr_overview/">{% trans "overview"|title %}</a></li>
                  {% endif %}
                  {% if perms.user_profile.search %}
                    <li {% ifequal module 'search' %}class="active"{% endifequal %}><a href="/cdr_view/">{% trans "search"|title %}</a></li>
                  {% endif %}
                  {% if perms.user_profile.daily_comparison %}
                    <li {% ifequal module 'cdr_daily_comparison' %}class="active"{% endifequal %}><a href="/daily_comparison/">{% trans "daily comparison"|title %}</a></li>
                  {% endif %}
                 </ul>
              </li>
            </ul>

                        <ul class="nav navbar-nav">
              <li class="{% ifactive '/dashboard/' %}active{% endifactive %}{% ifactive '/sms_dashboard/' %}active{% endifactive %}">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">{% trans "real-time"|title %}<b class="caret"></b></a>
                <ul class="dropdown-menu">
                  {% if perms.user_profile.real_time_calls %}
                    <li {% ifequal module 'cdr_realtime' %}class="active"{% endifequal %}><a href="/cdr_realtime/">{% trans "real-time calls"|title %}</a></li>
                  {% endif %}
                  {% if perms.user_profile.concurrent_calls %}
                    <li {% ifequal module 'cdr_concurrent_calls' %}class="active"{% endifequal %}><a href="/cdr_concurrent_calls/">{% trans "concurrent calls"|title %}</a></li>
                  {% endif %}
                 </ul>
              </li>
            </ul>
            <ul class="nav navbar-nav">
              <li class="{% ifactive '/dashboard/' %}active{% endifactive %}{% ifactive '/sms_dashboard/' %}active{% endifactive %}">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">{% trans "reports"|title %}<b class="caret"></b></a>
                <ul class="dropdown-menu">
                  {% if perms.user_profile.by_country %}
                    <li {% ifequal module 'cdr_country_report' %}class="active"{% endifequal %}><a href="/country_report/">{% trans "by country"|title %}</a></li>
                  {% endif %}
                  {% if perms.user_profile.world_map %}
                    <li {% ifequal module 'world_map_view' %}class="active"{% endifequal %}><a href="/world_map/">{% trans "world map"|title %}</a></li>
                  {% endif %}
                  {% if perms.user_profile.mail_report %}
                    <li {% ifequal module 'cdr_mail_report' %}class="active"{% endifequal %}><a href="/mail_report/">{% trans "mail report"|title %}</a></li>
                  {% endif %}
                </ul>
              </li>
            </ul>
            <ul class="nav navbar-nav">
              <li class="{% ifactive '/dashboard/' %}active{% endifactive %}{% ifactive '/sms_dashboard/' %}active{% endifactive %}">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">{% trans "threat control"|title %}<b class="caret"></b></a>
                <ul class="dropdown-menu">
                  {% if perms.cdr_alert.alert_settings %}
                    <li {% ifequal module 'alert' %}class="active"{% endifequal %}><a href="/alert/">{% trans "alert settings"|title %}</a></li>
                  {% endif %}
                  {% if perms.cdr_alert.alarm_report %}
                    <li {% ifequal module 'alert_report' %}class="active"{% endifequal %}><a href="/alert_report/">{% trans "alert report"|title %}</a></li>
                  {% endif %}
                  {% if perms.cdr_alert.view_blacklist and perms.cdr_alert.view_whitelist%}
                    <li {% ifequal module 'trust_control' %}class="active"{% endifequal %}><a href="/trust_control/">{% trans "destination control"|title %}</a></li>
                  {% endif %}
                </ul>
              </li>
            </ul>

              <ul class="nav navbar-nav">
                  <li class="{% ifactive '/dashboard/' %}active{% endifactive %}{% ifactive '/sms_dashboard/' %}active{% endifactive %}">
                      <a href="#" class="dropdown-toggle" data-toggle="dropdown">{% trans "billing"|title %}<b class="caret"></b></a>
                      <ul class="dropdown-menu">
                          {% if perms.user_profile.call_rate %}
                          <li><a href="/rates/"> {% trans "rates"|title %}</a></li>
                          {% endif %}
                          {% if perms.user_profile.sumulator %}
                          <li><a href="/simulator/"> {% trans "call simulator"|title %}</a></li>
                          {% endif %}
                          {% if perms.user_profile.daily_billing %}
                            <li><a href="/daily_billing_report/"> {% trans "daily billing report"|title %}</a></li>
                          {% endif %}
                          {% if perms.user_profile.hourly_billing %}
                              <li><a href="/hourly_billing_report/"> {% trans "hourly billing report"|title %}</a></li>
                          {% endif %}
                      </ul>
                  </li>
              </ul>
          {% endif %}

          {% if user.is_authenticated %}
          {% get_notice_count user as notice_count %}
            <ul class="nav navbar-nav navbar-right">
              <li class="{% ifactive '/dashboard/' %}active{% endifactive %}{% ifactive '/sms_dashboard/' %}active{% endifactive %}">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">{{ user.username|capfirst }}
                    <span class="badge">{{ notice_unseen_count }}</span>
                    <b class="caret"></b>
                </a>
                <ul class="dropdown-menu">
                  <li {% ifequal module 'detail_change' %}class="active"{% endifequal %}><a href="/user_detail_change/?action=tabs-1">
                        {% trans "account settings"|capfirst %}</a>
                  </li>
                  <li>
                    <a href="/user_notification/">{% trans "notifications"|title %}
                      <span class="label label-warning">{{ notice_count }}</span>
                    </a>
                  </li>
                  <li {% ifequal module 'detail_change' %}class="active"{% endifequal %}><a href="/user_detail_change/?action=tabs-3">
                    {% trans "change language"|title %}</a>
                  </li>
                  <li class="divider"></li>
                  {% if perms.user_profile.view_api_explorer %}
                    <li><a href="/api-explorer/"> {% trans "API explorer"|capfirst %}</a></li>
                  {% endif %}
                  {% if user.is_superuser %}
                    <li><a href="/diagnostic/"> {% trans "diagnostic"|title %}</a></li>
                  {% endif %}
                  <li class="divider"></li>
                  {% if user.is_superuser %}
                    <li><a href="/admin/"> {% trans "administration"|title %}</a></li>
                    <li class="divider"></li>
                  {% endif %}
                  <li><a href="/logout/">{% trans "log out"|title %}</a></li>
                </ul>
              </li>
            </ul>
          {% endif %}

    </div><!--/.nav-collapse -->
  </div>
</nav>
